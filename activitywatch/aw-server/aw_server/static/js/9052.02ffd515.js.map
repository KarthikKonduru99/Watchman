{"version":3,"file":"js/9052.02ffd515.js","mappings":"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","sources":["webpack://aw-webui/./src/views/Report.vue","webpack://aw-webui/./src/views/Report.vue?97a2","webpack://aw-webui/./src/views/Report.vue?1b01","webpack://aw-webui/./src/views/Report.vue?88e4","webpack://aw-webui/./src/util/datasets.ts","webpack://aw-webui/./node_modules/vue-awesome/icons/angle-double-down.js","webpack://aw-webui/./node_modules/vue-awesome/icons/angle-double-up.js","webpack://aw-webui/./node_modules/vue-awesome/icons/search.js","webpack://aw-webui/./node_modules/vue-awesome/icons/spinner.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h3',[_vm._v(\"Report\")]),_vm._v(\"Generate a report of time spent on a certain category of device activity.\"),_c('b-alert',{staticClass:\"mt-2\",staticStyle:{},attrs:{\"show\":\"\"}},[_vm._v(\"This feature is still in early development.\")]),(_vm.error)?_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('aw-select-categories-or-pattern',{scopedSlots:_vm._u([{key:\"input-group-append\",fn:function(){return [_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"success\",\"disabled\":!_vm.has_pattern},on:{\"click\":function($event){return _vm.generate()}}},[_c('icon',{attrs:{\"name\":\"search\"}}),_vm._v(\"Generate\")],1)]},proxy:true}]),model:{value:(_vm.filterCategories),callback:function ($$v) {_vm.filterCategories=$$v},expression:\"filterCategories\"}}),_c('div',{staticClass:\"d-flex mt-1\"},[_c('span',{staticClass:\"mr-auto small\",staticStyle:{\"color\":\"#666\"}},[_vm._v(\"Hostname: \"+_vm._s(_vm.queryOptions.hostname))]),_c('b-button',{staticClass:\"border-0\",attrs:{\"size\":\"sm\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){_vm.show_options = !_vm.show_options}}},[(!_vm.show_options)?_c('span',[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\" Show options\")],1):_c('span',[_c('icon',{attrs:{\"name\":\"angle-double-up\"}}),_vm._v(\" Hide options\")],1)])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_options),expression:\"show_options\"}]},[_c('h4',[_vm._v(\"Options\")]),_c('aw-query-options',{model:{value:(_vm.queryOptions),callback:function ($$v) {_vm.queryOptions=$$v},expression:\"queryOptions\"}})],1),(_vm.status == 'searching')?_c('div',[_c('div',[_c('icon',{attrs:{\"name\":\"spinner\",\"pulse\":\"\"}}),_vm._v(\" Searching...\")],1)]):_vm._e(),(_vm.events != null)?_c('div',[_c('hr'),_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-fill\"},[_vm._v(\"Found \"+_vm._s(_vm.events.length)+\" events in \"+_vm._s(_vm.queryTime / 1000)+\" seconds\")]),_c('div',[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-input-group-prepend',[_c('b-input-group-text',[_c('icon',{attrs:{\"name\":\"save\"}}),_c('div',{staticClass:\"mx-1\"},[_vm._v(\"Export as:\")])],1)],1),_c('b-input-group-append',[_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){return _vm.export_csv()}}},[_vm._v(\"CSV\")]),_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){return _vm.export_json()}}},[_vm._v(\"JSON\")])],1)],1)],1)]),_c('hr'),_c('vis-timeline',{attrs:{\"events\":_vm.events.slice(0, 500),\"filterShortEvents\":\"\"}}),(_vm.events.length > 500)?_c('div',{staticClass:\"small\"},[_vm._v(\"Too many events, will only show last 500 events.\")]):_vm._e(),_c('hr'),_c('aw-timeline-barchart',{attrs:{\"datasets\":_vm.datasets,\"height\":100}}),_c('hr'),_c('aw-selectable-eventview',{attrs:{\"events\":_vm.events}}),_c('hr'),_c('hr'),_c('div',[_vm._v(\"Didn't find what you were looking for?\"),_c('br'),_vm._v(\"Add a week to the search: \"),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){_vm.start = _vm.start.subtract(1, 'week'); _vm.search()}}},[_vm._v(\"+1 week\")])],1)],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport _ from 'lodash';\nimport moment from 'moment';\nimport Papa from 'papaparse';\n\nimport 'vue-awesome/icons/search';\nimport 'vue-awesome/icons/spinner';\nimport 'vue-awesome/icons/angle-double-down';\nimport 'vue-awesome/icons/angle-double-up';\n\nimport { canonicalEvents } from '~/queries';\nimport { buildBarchartDataset } from '~/util/datasets';\n\nimport { useActivityStore } from '~/stores/activity';\nimport { useCategoryStore } from '~/stores/categories';\nimport { useBucketsStore } from '~/stores/buckets';\n\nimport { getClient } from '~/util/awclient';\n\nexport default {\n  name: 'Report',\n  data() {\n    return {\n      activityStore: useActivityStore(),\n      categoryStore: useCategoryStore(),\n      bucketsStore: useBucketsStore(),\n\n      events: null,\n\n      status: null,\n      queryTime: null,\n      error: '',\n\n      // Options\n      show_options: false,\n      queryOptions: {},\n      filterCategories: [],\n    };\n  },\n  computed: {\n    has_pattern: function () {\n      return this.filterCategories.length > 0;\n    },\n    datasets: function () {\n      return buildBarchartDataset(\n        this.activityStore.category.by_period,\n        this.categoryStore.classes\n      );\n    },\n  },\n  mounted: async function () {\n    await this.bucketsStore.ensureLoaded();\n  },\n  methods: {\n    generate: async function () {\n      // TODO: use full query (one per day/timeperiod) instead of canonicalEvents\n      let query = canonicalEvents({\n        bid_window: 'aw-watcher-window_' + this.queryOptions.hostname,\n        bid_afk: 'aw-watcher-afk_' + this.queryOptions.hostname,\n        filter_afk: this.queryOptions.filter_afk,\n        categories: this.filterCategories,\n        filter_categories: this.filterCategories.map(c => c[0]),\n      });\n      query += '; RETURN = events;';\n\n      const query_array = query.split(';').map(s => s.trim() + ';');\n      const start = moment(this.queryOptions.start).format();\n      const end = moment(this.queryOptions.stop).format();\n      const timeperiods = [start + '/' + end];\n      try {\n        this.status = 'searching';\n        const time = moment();\n        const data = await getClient().query(timeperiods, query_array);\n        this.events = _.orderBy(data[0], ['timestamp'], ['desc']);\n        this.error = '';\n        this.queryTime = moment().diff(time);\n      } catch (e) {\n        console.error(e);\n        this.error = e.response.data.message;\n      } finally {\n        this.status = null;\n      }\n    },\n\n    export_json() {\n      const data = JSON.stringify(this.events, null, 2);\n      const blob = new Blob([data], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'events.json';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n\n    export_csv() {\n      const data = this.events.map(e => {\n        return [e.timestamp, e.duration, e.data['$category']];\n      });\n      const csv = Papa.unparse(data, { columns: ['timestamp', 'duration', 'category'] });\n      const blob = new Blob([csv], { type: 'text/csv' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'events.csv';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n  },\n};\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Report.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Report.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Report.vue?vue&type=template&id=9eb1781a&scoped=true&lang=pug&\"\nimport script from \"./Report.vue?vue&type=script&lang=ts&\"\nexport * from \"./Report.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9eb1781a\",\n  null\n  \n)\n\nexport default component.exports","import _ from 'lodash';\n\nimport { split_by_hour_into_data } from '~/util/transforms';\nimport { getColorFromCategory } from '~/util/color';\nimport { Category } from '~/util/classes';\nimport { IEvent } from './interfaces';\nimport { useCategoryStore } from '~/stores/categories';\n\ninterface HourlyData {\n  cat_events: IEvent[];\n}\n\ninterface Dataset {\n  label: string;\n  backgroundColor: string;\n  data: number[];\n}\n\nexport function buildBarchartDataset(data_by_hour: HourlyData[], classes: Category[]): Dataset[] {\n  const SEP = '>>>';\n  const data = data_by_hour;\n  if (data) {\n    const category_names: Set<string> = new Set(\n      Object.values(data)\n        .map(result => {\n          return result.cat_events.map(e => e.data['$category'].join(SEP));\n        })\n        .flat()\n    );\n    const ds: Dataset[] = [...category_names]\n      .map(c_ => {\n        const categoryStore = useCategoryStore();\n        const c = categoryStore.get_category(c_.split(SEP));\n\n        if (c) {\n          const values = Object.values(data).map(results => {\n            const cat = results.cat_events.find(e => _.isEqual(e.data['$category'], c.name));\n            if (cat) return Math.round((cat.duration / (60 * 60)) * 1000) / 1000;\n            else return null;\n          });\n          return {\n            label: c.name.join(' > '),\n            backgroundColor: getColorFromCategory(c, classes),\n            data: values,\n          } as Dataset;\n        } else {\n          // FIXME: This shouldn't happen\n          // This may for example happen if one doesn't have an 'Uncategorized' category,\n          // as can happen when one upgrades from an old version where there wasn't one in the default classes.\n          console.error('missing category:', c_);\n        }\n      })\n      .filter(x => x);\n    return ds;\n  } else {\n    return [];\n  }\n}\n\nexport function buildBarchartDatasetActive(events_active: IEvent[]) {\n  const data = split_by_hour_into_data(events_active);\n  return [\n    {\n      label: 'Total time',\n      backgroundColor: '#6699ff',\n      data,\n    },\n  ];\n}\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'angle-double-down': {\n    width: 320,\n    height: 512,\n    paths: [\n      {\n        d: 'M143 256.3l-136-136c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.8 22.5c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 0.1zM177 448.3c-9.4 9.4-24.6 9.4-34-0.1l-136-136c-9.4-9.3-9.4-24.5 0-33.9l22.7-22.6c9.3-9.4 24.5-9.4 33.9 0l96.4 96.4 96.5-96.3c9.3-9.4 24.5-9.4 33.9 0l22.6 22.6c9.4 9.3 9.4 24.5 0 33.9z'\n      }\n    ]\n  }\n})\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'angle-double-up': {\n    width: 320,\n    height: 512,\n    paths: [\n      {\n        d: 'M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0l-96.5-96.3-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0l-22.7-22.6c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-0.1zM143 63.7c9.4-9.4 24.6-9.4 33.8 0l136 136c9.4 9.3 9.4 24.5 0 33.9l-22.6 22.6c-9.3 9.4-24.5 9.4-33.9 0l-96.4-96.4-96.4 96.4c-9.3 9.4-24.5 9.4-33.9 0l-22.6-22.6c-9.4-9.3-9.4-24.5 0-33.9z'\n      }\n    ]\n  }\n})\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  search: {\n    width: 512,\n    height: 512,\n    paths: [\n      {\n        d: 'M505 442.7c9.3 9.4 9.3 24.6-0.1 34l-28.3 28.3c-9.3 9.4-24.5 9.4-33.9 0l-99.7-99.7c-4.5-4.5-7-10.6-7-17v-16.3c-35.3 27.6-79.7 44-128 44-114.9 0-208-93.1-208-208s93.1-208 208-208 208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7zM208 336c70.8 0 128-57.3 128-128 0-70.8-57.3-128-128-128-70.8 0-128 57.3-128 128 0 70.8 57.3 128 128 128z'\n      }\n    ]\n  }\n})\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  spinner: {\n    width: 512,\n    height: 512,\n    paths: [\n      {\n        d: 'M304 48c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM256 416c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM464 208c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM96 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM108.9 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM403.1 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM108.9 60.9c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48z'\n      }\n    ]\n  }\n})\n"],"names":["render","_vm","this","_c","_self","_v","staticClass","staticStyle","attrs","error","_s","_e","scopedSlots","_u","key","fn","has_pattern","on","$event","generate","proxy","model","value","filterCategories","callback","$$v","expression","queryOptions","hostname","show_options","directives","name","rawName","status","events","length","queryTime","export_csv","export_json","slice","datasets","start","subtract","search","staticRenderFns","data","activityStore","useActivityStore","categoryStore","useCategoryStore","bucketsStore","useBucketsStore","computed","buildBarchartDataset","category","by_period","classes","mounted","ensureLoaded","methods","query","canonicalEvents","bid_window","bid_afk","filter_afk","categories","filter_categories","map","c","query_array","split","s","trim","moment","format","end","stop","timeperiods","time","getClient","diff","console","response","message","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","e","timestamp","duration","csv","Papa","columns","component","data_by_hour","SEP","category_names","Set","Object","values","result","cat_events","join","flat","ds","c_","get_category","results","cat","find","Math","round","label","backgroundColor","getColorFromCategory","filter","x","width","height","paths","d","spinner"],"sourceRoot":""}