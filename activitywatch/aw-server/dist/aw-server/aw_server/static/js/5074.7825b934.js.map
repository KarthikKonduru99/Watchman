{"version":3,"file":"js/5074.7825b934.js","mappings":"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","sources":["webpack://aw-webui/./src/views/Bucket.vue","webpack://aw-webui/src/views/Bucket.vue","webpack://aw-webui/./src/views/Bucket.vue?97c2","webpack://aw-webui/./src/views/Bucket.vue?71bc","webpack://aw-webui/./node_modules/lodash/cloneDeep.js","webpack://aw-webui/./node_modules/lodash/map.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h3',[_vm._v(_vm._s(_vm.id))]),_c('table',[_c('tr',[_c('th',[_vm._v(\"Type:\")]),_c('td',[_vm._v(_vm._s(_vm.bucket.type))])]),_c('tr',[_c('th',[_vm._v(\"Client:\")]),_c('td',[_vm._v(_vm._s(_vm.bucket.client))])]),_c('tr',[_c('th',[_vm._v(\"Hostname:\")]),_c('td',[_vm._v(_vm._s(_vm.bucket.hostname))])]),_c('tr',[_c('th',[_vm._v(\"Created:\")]),_c('td',[_vm._v(_vm._s(_vm._f(\"iso8601\")(_vm.bucket.created)))])]),(_vm.bucket.metadata)?_c('tr',[_c('th',[_vm._v(\"First/last event:\")]),_c('td',[_vm._v(_vm._s(_vm.bucket.metadata.start)+\" / \"+_vm._s(_vm.bucket.metadata.end))])]):_vm._e(),_c('tr',[_c('th',[_vm._v(\"Eventcount:\")]),_c('td',[_vm._v(_vm._s(_vm.eventcount))])])]),_c('input-timeinterval',{attrs:{\"maxDuration\":_vm.maxDuration},model:{value:(_vm.daterange),callback:function ($$v) {_vm.daterange=$$v},expression:\"daterange\"}}),_c('vis-timeline',{attrs:{\"buckets\":[_vm.bucket_with_events],\"showRowLabels\":false}}),_c('aw-eventlist',{attrs:{\"bucket_id\":_vm.id,\"events\":_vm.events,\"editable\":\"\"},on:{\"save\":_vm.updateEvent}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv\n  h3 {{ id }}\n  table\n    tr\n      th Type:\n      td {{ bucket.type }}\n    tr\n      th Client:\n      td {{ bucket.client }}\n    tr\n      th Hostname:\n      td {{ bucket.hostname }}\n    tr\n      th Created:\n      td {{ bucket.created | iso8601 }}\n    tr(v-if=\"bucket.metadata\")\n      th First/last event:\n      td\n        | {{ bucket.metadata.start}} /\n        | {{ bucket.metadata.end }}\n    tr\n      th Eventcount:\n      td {{ eventcount }}\n\n  input-timeinterval(v-model=\"daterange\", :maxDuration=\"maxDuration\")\n\n  vis-timeline(:buckets=\"[bucket_with_events]\", :showRowLabels=\"false\")\n\n  aw-eventlist(:bucket_id=\"id\", @save=\"updateEvent\", :events=\"events\" editable=true)\n</template>\n\n<script>\nimport { useBucketsStore } from '~/stores/buckets';\nimport { getClient } from '~/util/awclient';\n\nexport default {\n  name: 'Bucket',\n  props: {\n    id: String,\n  },\n  data: () => {\n    return {\n      bucketsStore: useBucketsStore(),\n\n      events: [],\n      eventcount: '?',\n      daterange: null,\n      maxDuration: 31 * 24 * 60 * 60,\n    };\n  },\n  computed: {\n    bucket() {\n      return this.bucketsStore.getBucket(this.id) || { id: this.id };\n    },\n    bucket_with_events() {\n      console.log(this.bucket);\n      return {\n        ...this.bucket,\n        events: this.events,\n      };\n    },\n  },\n  watch: {\n    daterange: async function () {\n      await this.getEvents(this.id);\n    },\n  },\n  mounted: async function () {\n    await this.bucketsStore.ensureLoaded();\n    await this.getEventCount(this.id);\n  },\n  methods: {\n    getEvents: async function (bucket_id) {\n      const bucket = await this.bucketsStore.getBucketWithEvents({\n        id: bucket_id,\n        start: this.daterange[0].format(),\n        end: this.daterange[1].format(),\n      });\n      this.events = bucket.events;\n    },\n    getEventCount: async function (bucket_id) {\n      this.eventcount = (await getClient().countEvents(bucket_id)).data;\n    },\n    updateEvent: function (event) {\n      const i = this.events.findIndex(e => e.id == event.id);\n      if (i != -1) {\n        // This is needed instead of this.events[i] because insides of arrays\n        // are not reactive in Vue.\n        this.$set(this.events, i, event);\n      } else {\n        console.error(':(');\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Bucket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Bucket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bucket.vue?vue&type=template&id=69fab224&lang=pug&\"\nimport script from \"./Bucket.vue?vue&type=script&lang=js&\"\nexport * from \"./Bucket.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n"],"names":["render","_vm","this","_c","_self","_v","_s","id","bucket","type","client","hostname","_f","created","metadata","start","end","_e","eventcount","attrs","maxDuration","model","value","daterange","callback","$$v","expression","bucket_with_events","events","on","updateEvent","staticRenderFns","name","props","data","bucketsStore","computed","console","watch","mounted","methods","getEvents","getEventCount","getClient","component","baseClone","CLONE_DEEP_FLAG","CLONE_SYMBOLS_FLAG","cloneDeep","module","exports","arrayMap","baseIteratee","baseMap","isArray","map","collection","iteratee","func"],"sourceRoot":""}