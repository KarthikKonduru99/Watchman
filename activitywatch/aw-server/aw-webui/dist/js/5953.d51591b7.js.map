{"version":3,"file":"js/5953.d51591b7.js","mappings":"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","sources":["webpack://aw-webui/./src/visualizations/ForceGraph.vue","webpack://aw-webui/./src/visualizations/ForceGraph.vue?edd3","webpack://aw-webui/./src/visualizations/ForceGraph.vue?6ace","webpack://aw-webui/./src/visualizations/ForceGraph.vue?7775"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"forcegraph\"}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport * as d3 from 'd3';\n\nexport default {\n  name: 'ForceGraph',\n  props: {\n    data: {\n      type: Object,\n      required: true,\n    },\n  },\n  data: () => ({\n    cancelPromise: null,\n  }),\n  watch: {\n    // Watch for changes in the data and update the graph\n    data() {\n      this.drawGraph(this.data);\n    },\n  },\n  mounted() {\n    this.drawGraph(this.data);\n  },\n  methods: {\n    drawGraph({ nodes, links }) {\n      console.log('rendering...');\n      this.cancelPromise && this.cancelPromise();\n      const promise = new Promise(resolve => {\n        this.cancelPromise = resolve;\n      });\n\n      const svgEl = ForceGraph({ nodes, links }, { invalidation: promise });\n      const svg = d3.select('#forcegraph');\n      //clear\n      svg.selectAll('*').remove();\n      //append\n      svg.node().appendChild(svgEl);\n      console.log('drawn!');\n    },\n  },\n};\n\n// Copyright 2021 Observable, Inc.\n// Released under the ISC license.\n// https://observablehq.com/@d3/force-directed-graph\nfunction ForceGraph(\n  {\n    nodes, // an iterable of node objects (typically [{id}, …])\n    links, // an iterable of link objects (typically [{source, target}, …])\n  },\n  {\n    nodeId = d => d.id, // given d in nodes, returns a unique identifier (string)\n    nodeGroup = d => d.group, // given d in nodes, returns an (ordinal) value for color\n    nodeGroups, // an array of ordinal values representing the node groups\n    nodeTitle = d => d.id.split('>').slice(-1), // given d in nodes, a title string\n    nodeFill = 'currentColor', // node stroke fill (if not using a group color encoding)\n    nodeStroke = '#fff', // node stroke color\n    nodeStrokeWidth = 1.5, // node stroke width, in pixels\n    nodeStrokeOpacity = 1, // node stroke opacity\n    nodeRadius = 4, // node radius, in pixels\n    nodeStrength,\n    linkSource = ({ source }) => source, // given d in links, returns a node identifier string\n    linkTarget = ({ target }) => target, // given d in links, returns a node identifier string\n    linkStroke = '#999', // link stroke color\n    linkStrokeOpacity = 0.6, // link stroke opacity\n    linkStrokeWidth = d => 1.5 * Math.sqrt(d.value), // given d in links, returns a stroke width in pixels\n    linkStrokeLinecap = 'round', // link stroke linecap\n    linkStrength = d => {\n      // if low value, link should push nodes apart\n      // if high value, link should pull nodes together\n      if (d.value < 10) {\n        return 0.01;\n      } else {\n        return Math.sqrt(1 / (2 + d.value));\n      }\n    }, // given d in links, returns a link strength\n    colors = d3.schemeTableau10, // an array of color strings, for the node groups\n    width = 640, // outer width, in pixels\n    height = 400, // outer height, in pixels\n    invalidation, // when this promise resolves, stop the simulation\n  } = {}\n) {\n  // Compute values.\n  const N = d3.map(nodes, nodeId).map(intern);\n  const LS = d3.map(links, linkSource).map(intern);\n  const LT = d3.map(links, linkTarget).map(intern);\n  if (nodeTitle === undefined) nodeTitle = (_, i) => N[i];\n  const T = nodeTitle == null ? null : d3.map(nodes, nodeTitle);\n  const G = nodeGroup == null ? null : d3.map(nodes, nodeGroup).map(intern);\n  const W = typeof linkStrokeWidth !== 'function' ? null : d3.map(links, linkStrokeWidth);\n  const L = typeof linkStroke !== 'function' ? null : d3.map(links, linkStroke);\n\n  // Replace the input nodes and links with mutable objects for the simulation.\n  nodes = d3.map(nodes, (node, i) => ({ id: N[i], color: node.color, value: node.value }));\n  links = d3.map(links, (link, i) => ({ source: LS[i], target: LT[i], value: link.value }));\n\n  // Scale so that the area of each node is ~proportional to the time value\n  nodes = nodes.map(d => {\n    d.radius = nodeRadius + 5 * Math.sqrt(d.value / 60 / 60);\n    return d;\n  });\n\n  // Compute default domains.\n  if (G && nodeGroups === undefined) nodeGroups = d3.sort(G);\n\n  // Construct the scales.\n  const color = nodeGroup == null ? null : d3.scaleOrdinal(nodeGroups, colors);\n\n  // Construct the forces.\n  const forceNode = d3.forceManyBody();\n  const forceLink = d3.forceLink(links).id(({ index: i }) => N[i]);\n  if (nodeStrength !== undefined) forceNode.strength(nodeStrength);\n  if (linkStrength !== undefined) forceLink.strength(linkStrength);\n\n  const simulation = d3\n    .forceSimulation(nodes)\n    .force('link', forceLink)\n    .force('charge', forceNode)\n    .force('center', d3.forceCenter())\n    .force(\n      'collision',\n      d3.forceCollide(d => d.radius)\n    )\n    .on('tick', ticked);\n\n  const svg = d3\n    .create('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', [-width / 2, -height / 2, width, height])\n    .attr('style', 'max-width: 100%; height: auto; height: intrinsic;');\n\n  const link = svg\n    .append('g')\n    .attr('stroke', typeof linkStroke !== 'function' ? linkStroke : null)\n    .attr('stroke-opacity', linkStrokeOpacity)\n    .attr('stroke-width', typeof linkStrokeWidth !== 'function' ? linkStrokeWidth : null)\n    .attr('stroke-linecap', linkStrokeLinecap)\n    .selectAll('line')\n    .data(links)\n    .join('line');\n\n  const node = svg\n    .append('g')\n    .attr('fill', nodeFill)\n    .attr('stroke', nodeStroke)\n    .attr('stroke-opacity', nodeStrokeOpacity)\n    .attr('stroke-width', nodeStrokeWidth)\n    .selectAll('circle')\n    .data(nodes)\n    .join('circle')\n    .attr('r', d => d.radius)\n    .call(drag(simulation));\n\n  if (W) link.attr('stroke-width', ({ index: i }) => W[i]);\n  if (L) link.attr('stroke', ({ index: i }) => L[i]);\n  //if (G) node.attr('fill', ({ index: i }) => color(G[i]));\n  node.attr('fill', ({ index: i }) => nodes[i].color);\n  if (T) node.append('title').text(({ index: i }) => T[i]);\n  if (invalidation != null) invalidation.then(() => simulation.stop());\n\n  function intern(value) {\n    return value !== null && typeof value === 'object' ? value.valueOf() : value;\n  }\n\n  function ticked() {\n    link\n      .attr('x1', d => d.source.x)\n      .attr('y1', d => d.source.y)\n      .attr('x2', d => d.target.x)\n      .attr('y2', d => d.target.y);\n\n    node.attr('cx', d => d.x).attr('cy', d => d.y);\n  }\n\n  function drag(_simulation) {\n    function dragstarted(event) {\n      if (!event.active) _simulation.alphaTarget(0.3).restart();\n      event.subject.fx = event.subject.x;\n      event.subject.fy = event.subject.y;\n    }\n\n    function dragged(event) {\n      event.subject.fx = event.x;\n      event.subject.fy = event.y;\n    }\n\n    function dragended(event) {\n      if (!event.active) _simulation.alphaTarget(0);\n      event.subject.fx = null;\n      event.subject.fy = null;\n    }\n\n    return d3.drag().on('start', dragstarted).on('drag', dragged).on('end', dragended);\n  }\n\n  return Object.assign(svg.node(), { scales: { color } });\n}\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ForceGraph.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ForceGraph.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ForceGraph.vue?vue&type=template&id=75a74900&lang=pug&\"\nimport script from \"./ForceGraph.vue?vue&type=script&lang=ts&\"\nexport * from \"./ForceGraph.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ForceGraph.vue?vue&type=style&index=0&id=75a74900&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","name","props","data","type","Object","required","cancelPromise","watch","drawGraph","mounted","methods","nodes","links","console","log","promise","Promise","resolve","svgEl","ForceGraph","invalidation","svg","d3","select","selectAll","remove","node","appendChild","nodeId","d","id","nodeGroup","group","nodeGroups","nodeTitle","split","slice","nodeFill","nodeStroke","nodeStrokeWidth","nodeStrokeOpacity","nodeRadius","nodeStrength","linkSource","source","linkTarget","target","linkStroke","linkStrokeOpacity","linkStrokeWidth","Math","sqrt","value","linkStrokeLinecap","linkStrength","colors","schemeTableau10","width","height","N","map","intern","LS","LT","undefined","_","i","T","G","W","L","color","link","radius","sort","scaleOrdinal","forceNode","forceManyBody","forceLink","index","strength","simulation","force","forceCenter","forceCollide","on","ticked","attr","append","join","call","drag","valueOf","x","y","_simulation","dragstarted","event","active","alphaTarget","restart","subject","fx","fy","dragged","dragended","text","then","stop","assign","scales","component"],"sourceRoot":""}